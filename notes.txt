### How to create a package from scratch
# url: https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/
library(devtools)
library(roxygen2)
create('my_package')
# update DESCRIPTION file
# write function inside R dir with documentation
document('ioutil')
install('ioutil')

### how to install your package from github
install_github(repo = 'alorchhota/autil', subdir = 'ioutil')

### Dependencies on other packages
# described in DESCRIPTION
# Dependencies: loads packages with the current one
# Imports: these packages are installed when current package is installed, but not loaded until required.
# Suggests: similar to imports, but not necessary for the package. may be used in examples.
# use "require(pkg)" inside the function where pkg is needed.
# use "biocViews:" in DESCRIPTION file for bioconductor packages.
# install non-standard packages: https://cran.r-project.org/web/packages/devtools/vignettes/dependencies.html


### how to add references in documentation
# url: https://cran.r-project.org/web/packages/Rdpack/vignettes/Inserting_bibtex_references.pdf


### how to include multiple functions in one documentation file
# url: https://gist.github.com/jefferys/b79fe87314b0dc72fec9


### unit test
# url: http://r-pkgs.had.co.nz/tests.html
library(usethis)
library(testthat)
proj_set('miscutil')
use_testthat()
# create a test file inside tests/testthat/
# the test file name must start with "test"
# sample code for a test file
context("parse_delimitted_string tests")
library(miscutil)
test_that("parse delimitter", {
  x = "one,two,three,"
  expect_equal(length(parse_delimitted_string(x)),3)
  expect_equal(length(parse_delimitted_string(x, rm.empty = F)),4)
  expect_equal(length(parse_delimitted_string(x, delim = 'w', rm.empty = F)),2)
  expect_match(parse_delimitted_string(x)[1],'one')
  expect_is(parse_delimitted_string(x), 'character')
})
# sample code ends for a test file
devtools::test('miscutil') # executes all tests in miscutil package


